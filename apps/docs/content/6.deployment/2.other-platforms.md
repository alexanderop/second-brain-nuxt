# Other Platforms

Deploy your Second Brain to alternative platforms like Netlify or Cloudflare Pages.

## Platform Comparison

| Feature | Vercel | Netlify | Cloudflare Pages |
|---------|--------|---------|------------------|
| **Free Tier** | Generous | Generous | Very Generous |
| **Build Minutes** | 6000/month | 300/month | Unlimited |
| **Bandwidth** | 100GB/month | 100GB/month | Unlimited |
| **Node.js 24** | ✅ Yes | ✅ Yes | ⚠️ Workers only |
| **Nuxt Preset** | Native | Native | Native |
| **Deploy Previews** | ✅ Yes | ✅ Yes | ✅ Yes |

::alert{type="info"}
Second Brain is pre-configured for serverless deployment with in-memory SQLite and pre-rendering. These settings work across all platforms.
::

## Netlify Deployment

[Netlify](https://netlify.com) offers a developer-friendly platform with excellent Git integration.

### Step 1: Connect Repository

1. Log in to [Netlify Dashboard](https://app.netlify.com)
2. Click **"Add new site"** → **"Import an existing project"**
3. Connect your GitHub account and select your repository

### Step 2: Configure Build Settings

Configure your site settings:

| Setting | Value |
|---------|-------|
| **Base directory** | `apps/web` |
| **Build command** | `pnpm build` |
| **Publish directory** | `apps/web/.output/public` |

### Step 3: Set Node.js Version

Create a `.node-version` file in your repository root:

```
24
```

Or set the environment variable:

| Variable | Value |
|----------|-------|
| `NODE_VERSION` | `24` |

### Step 4: Configure netlify.toml (Optional)

For more control, create `apps/web/netlify.toml`:

```toml
[build]
  command = "pnpm build"
  publish = ".output/public"

[build.environment]
  NODE_VERSION = "24"

# Redirects for SPA fallback
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  conditions = {Role = ["admin"]}

# Cache static assets
[[headers]]
  for = "/_nuxt/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
```

### Step 5: Deploy

1. Click **"Deploy site"**
2. Wait for the build to complete
3. Your site is live at `https://your-site.netlify.app`

### Custom Domain on Netlify

1. Go to **Site settings** → **Domain management**
2. Click **"Add custom domain"**
3. Follow the DNS configuration instructions

Netlify provides free SSL certificates automatically.

---

## Cloudflare Pages Deployment

[Cloudflare Pages](https://pages.cloudflare.com) offers excellent performance with its global edge network.

### Step 1: Connect Repository

1. Log in to [Cloudflare Dashboard](https://dash.cloudflare.com)
2. Go to **Workers & Pages** → **Create application** → **Pages**
3. Connect your GitHub account and select your repository

### Step 2: Configure Build Settings

| Setting | Value |
|---------|-------|
| **Framework preset** | Nuxt.js |
| **Root directory** | `apps/web` |
| **Build command** | `pnpm build` |
| **Build output directory** | `.output/public` |

### Step 3: Set Environment Variables

Add these variables in the Cloudflare dashboard:

| Variable | Value |
|----------|-------|
| `NODE_VERSION` | `24` |
| `PNPM_VERSION` | `10` |

::alert{type="warning"}
Cloudflare Pages uses a different Node.js environment. Ensure you're using the `native` SQLite connector as configured in `nuxt.config.ts`.
::

### Step 4: Deploy

1. Click **"Save and Deploy"**
2. Wait for the build to complete
3. Your site is live at `https://your-project.pages.dev`

### Custom Domain on Cloudflare

1. Go to your Pages project → **Custom domains**
2. Click **"Set up a custom domain"**
3. If your domain is already on Cloudflare, DNS is configured automatically
4. Otherwise, follow the DNS instructions

### Cloudflare-Specific Configuration

For optimal performance on Cloudflare, you can add a `wrangler.toml` in `apps/web/`:

```toml
name = "second-brain"
compatibility_date = "2024-01-01"

[vars]
NUXT_PUBLIC_SITE_URL = "https://your-domain.com"

# Enable Node.js compatibility
node_compat = true
```

---

## Platform-Specific Considerations

### SQLite Configuration

All platforms use the same SQLite configuration in `nuxt.config.ts`:

```typescript
content: {
  database: {
    type: 'sqlite',
    filename: ':memory:',
  },
  experimental: {
    sqliteConnector: 'native',
  },
},
```

Key points:
- **In-memory database**: Serverless platforms have no persistent filesystem
- **Native SQLite**: Uses Node.js built-in SQLite (v22.5.0+) instead of better-sqlite3
- **Pre-rendering**: All content is rendered at build time

### Pre-rendering Requirements

The app pre-renders all pages at build time:

```typescript
routeRules: {
  '/**': { prerender: true },
},

nitro: {
  prerender: {
    crawlLinks: true,
    routes: ['/', '/api/graph', '/api/backlinks'],
  },
},
```

This ensures:
- Fast page loads (no server-side rendering needed)
- Works on static hosting (no serverless functions required)
- Content is embedded in HTML at build time

### Build Time Considerations

Content-heavy sites may have longer build times:

| Content Size | Approximate Build Time |
|--------------|------------------------|
| < 100 notes | 1-2 minutes |
| 100-500 notes | 2-4 minutes |
| 500-1000 notes | 4-8 minutes |
| 1000+ notes | 8+ minutes |

Tips for faster builds:
- Use platform build caching (enabled by default)
- Consider incremental builds if available
- Remove unused content types from schema

### Monorepo Structure

All platforms need to know about the monorepo structure:

1. **Root Directory**: Set to `apps/web` for the main app
2. **Install Command**: Use `pnpm install` (runs from workspace root)
3. **Build Command**: Use `pnpm build` (runs the web app build)

For docs site deployment, create a separate project with:
- Root Directory: `apps/docs`
- Different subdomain (e.g., `docs.yourdomain.com`)

---

## Troubleshooting

### Build Fails: "Cannot find module"

**Cause**: Monorepo dependencies not installed correctly

**Solution**: Ensure install runs from workspace root:
1. Set root directory to `apps/web` (not repository root)
2. The platform will detect `pnpm-workspace.yaml` and install all dependencies

### Build Fails: SQLite Errors

**Cause**: Platform trying to use `better-sqlite3` native bindings

**Solution**: Verify `nuxt.config.ts` has:
```typescript
content: {
  experimental: {
    sqliteConnector: 'native',
  },
},
```

### Pages Return 404

**Cause**: Pre-rendering not generating all routes

**Solution**:
1. Ensure `crawlLinks: true` is set
2. Add explicit routes if needed:
```typescript
nitro: {
  prerender: {
    routes: ['/', '/api/graph', '/api/backlinks', '/search'],
  },
},
```

### Assets Not Loading

**Cause**: Incorrect publish directory

**Solution**: Verify the publish directory is set to `.output/public` (relative to root directory)

---

## Next Steps

- [Vercel Deployment](/deployment/vercel) - Detailed Vercel guide
- [Site Configuration](/customization/site-config) - Customize before deploying
- [Environment Variables](/deployment/vercel#environment-variables) - Configuration options
