# Stats Dashboard

The Stats Dashboard provides a comprehensive overview of your knowledge base through metrics, charts, and visualizations.

## Overview

Access the stats dashboard at `/stats`. It displays:

- **Overview cards** - Key metrics at a glance
- **Content distribution charts** - Bar charts by type and tags
- **Growth timeline** - Line chart showing content creation over time
- **Connection analysis** - Hub notes, orphan notes, quality metrics
- **Top authors** - Most referenced content creators

## Overview Cards

Four summary cards appear at the top:

| Card | Description |
|------|-------------|
| **Total Notes** | Complete count of all content items |
| **Connections** | Total wiki-link edges in the knowledge graph |
| **Orphan Notes** | Percentage of notes with no connections |
| **This Week** | Content added in the last 7 days |

## Charts

### Content by Type

A horizontal bar chart showing how content is distributed across types (youtube, podcast, article, book, etc.). The chart uses:

- Emerald accent color for the top item
- Slate gradient for remaining items
- Dynamic height based on type count

### Top Tags

Shows the 8 most frequently used tags as a horizontal bar chart.

### Growth Over Time

A line chart with area fill showing content creation by month. Features:

- Monotone curve interpolation for smooth lines
- Emerald gradient area fill
- Data point circles at each month
- Automatic label spacing (shows every Nth label to prevent crowding)

## Connection Analysis

The bottom row displays three cards analyzing your knowledge graph:

### Hub Notes

Lists the 5 most connected notes in your knowledge base. These are your central concepts that link to many other notes. Clicking a hub navigates to that note.

### Orphan Notes

Shows notes with zero connections. These represent opportunities for integration:

- First 5 orphans displayed directly
- "View all" button opens a modal with the full list
- Modal supports filtering by title/type
- Sortable columns (title, type)
- Paginated results (10 per page)

### Quality Metrics

Progress bars showing content completeness:

| Metric | Description |
|--------|-------------|
| **Has summary** | Notes with the `summary` field populated |
| **Has personal notes** | Notes with the `notes` field populated |
| **Orphan-free** | Percentage of notes that have at least one connection |

Color indicators:
- Green (success): >= 70%
- Yellow (warning): 40-69%
- Red (error): < 40%

## Top Authors

A tag cloud of the 10 most referenced authors. Each chip shows:

- Author name
- Content count
- Links to the author's profile page

## API Reference

The stats dashboard fetches data from `/api/stats`:

```typescript
interface StatsData {
  total: number
  byType: Array<{ type: string; count: number }>
  byTag: Array<{ tag: string; count: number }>
  byAuthor: Array<{ author: string; count: number }>
  byMonth: Array<{ month: string; count: number }>
  quality: {
    withSummary: number
    withNotes: number
    total: number
  }
  connections: {
    totalEdges: number
    avgPerNote: number
    orphanCount: number
    orphanPercent: number
    hubs: HubNode[]
    orphans: OrphanNode[]
  }
  thisWeek: number
}
```

### Caching

The stats API uses server-side caching:

- **Max age**: 10 minutes
- **Strategy**: Stale-while-revalidate (SWR)

This ensures fast responses while keeping data reasonably fresh.

## Technical Implementation

### Components

| Component | Purpose |
|-----------|---------|
| `stats.vue` | Main page layout and data orchestration |
| `StatCard.vue` | Overview metric cards with icons and hover effects |
| `StatsBarChart.vue` | D3.js horizontal/vertical bar charts |
| `StatsLineChart.vue` | D3.js area chart for time series |

### Chart Library

Charts are built with D3.js:

- **Bar charts**: `d3-scale` (scaleBand, scaleLinear), gradient fills
- **Line charts**: `d3-shape` (line, area, curveMonotoneX), gradient areas
- **Responsive**: Charts resize using `useResizeObserver` from VueUse
- **Lazy loading**: Chart components are loaded asynchronously via `defineAsyncComponent`

### Data Sources

Stats are aggregated from:

1. **Content collection** - Queried via `queryCollection('content')` with minimal field selection
2. **Graph API** - Fetches `/api/graph` for connection metrics

### File Locations

```
app/pages/stats.vue                    # Main stats page
app/components/StatCard.vue            # Metric card component
app/components/StatsBarChart.vue       # Bar chart visualization
app/components/StatsLineChart.vue      # Line chart visualization
server/api/stats.get.ts                # Stats API endpoint
```
