# Keyboard Shortcuts

Second Brain includes comprehensive keyboard shortcuts for power users who prefer navigating without a mouse. All shortcuts are customizable through `site.config.ts`.

## Opening the Shortcuts Modal

Press `?` (Shift + /) anywhere in the app to open the keyboard shortcuts reference modal. This displays all available shortcuts organized by category.

## Shortcut Categories

### General Shortcuts

These shortcuts work globally throughout the application.

| Shortcut | Action |
|----------|--------|
| `?` | Show keyboard shortcuts modal |
| `⌘K` or `/` | Open search |
| `Esc` | Close modal / go back |
| `⌘⌥T` | Toggle dark mode |
| `⌘⇧\` | Toggle focus mode |
| `]` | Toggle table of contents |

### Navigation Shortcuts

Two-key sequences starting with `G` navigate to different pages. Press `G` first, then the second key.

| Shortcut | Action |
|----------|--------|
| `G` then `H` | Go to home |
| `G` then `B` | Go to books |
| `G` then `P` | Go to podcasts |
| `G` then `N` | Go to newsletters |
| `G` then `G` | Go to graph |
| `G` then `T` | Go to tags |
| `G` then `A` | Go to authors |
| `G` then `S` | Go to stats |

### Action Shortcuts

These shortcuts work within list views and content pages.

| Shortcut | Action |
|----------|--------|
| `J` | Next item (vim-style down) |
| `K` | Previous item (vim-style up) |
| `Enter` | Open selected item |
| `O` | Open external resource link |
| `A` | Open author page |
| `⇧L` | Copy wiki-link to clipboard |
| `⇧C` | Copy URL to clipboard |

## How Shortcuts Work

### Implementation

Shortcuts are implemented using Nuxt UI's `defineShortcuts` composable, which provides:

- **Key sequence support**: Two-key sequences like `g-h` (press G, then H)
- **Modifier key support**: Combinations like `meta_k` (⌘K) or `shift_/`
- **Focus-aware handling**: Shortcuts are disabled when typing in input fields

### Key Syntax

The `defineShortcuts` composable uses a specific syntax:

```ts
defineShortcuts({
  'meta_k': () => { /* Cmd+K action */ },
  'shift_/': () => { /* Shift+/ (?) action */ },
  'g-h': () => { /* G then H sequence */ },
  'j': () => { /* Single key */ },
})
```

- `_` connects modifier keys (meta, shift, alt, ctrl)
- `-` creates key sequences (press first key, then second)
- Single characters are direct key presses

## Customizing Shortcuts

All shortcuts are defined in `apps/web/site.config.ts`:

```ts
// site.config.ts
export const siteConfig = {
  shortcuts: {
    navigation: [
      { keys: ['G', 'H'], to: '/', description: 'Go to home' },
      { keys: ['G', 'B'], to: '/books', description: 'Go to books' },
      // Add more navigation shortcuts...
    ],
    actions: [
      { keys: ['J'], description: 'Next item' },
      { keys: ['K'], description: 'Previous item' },
      // Add more action shortcuts...
    ],
    general: [
      { keys: ['?'], description: 'Show keyboard shortcuts' },
      { keys: ['meta', 'K'], description: 'Open search' },
      // Add more general shortcuts...
    ],
  },
}
```

### Adding a New Navigation Shortcut

1. Add to the `shortcuts.navigation` array in `site.config.ts`:

```ts
{ keys: ['G', 'R'], to: '/reading-list', description: 'Go to reading list' },
```

2. Register the shortcut in the layout file (`app/layouts/default.vue`):

```ts
defineShortcuts({
  // ... existing shortcuts
  'g-r': () => {
    navigateTo('/reading-list')
  },
})
```

### Adding a New Action Shortcut

For page-specific actions, add shortcuts in the relevant page component:

```ts
// In your page component
defineShortcuts({
  'e': () => {
    // Edit current item
    openEditModal()
  },
})
```

Remember to add the shortcut to `site.config.ts` so it appears in the shortcuts modal:

```ts
actions: [
  // ... existing shortcuts
  { keys: ['E'], description: 'Edit current item' },
],
```

## Context-Specific Behavior

### List Navigation (J/K)

The vim-style `J` and `K` shortcuts work in list contexts:

- **Search page**: Navigate through search results
- **Table view**: Navigate through table rows
- **Content lists**: Navigate through content items

Press `Enter` to open the currently selected item.

### Focus Mode

Toggle focus mode with `⌘⇧\` to hide the header and navigation, letting you concentrate on the current content. Press again to restore the UI.

### Table of Contents

On content pages with headings, press `]` to toggle the table of contents sidebar for quick section navigation.

## Technical Details

### Composables

- **`useShortcutsModal()`**: Manages the shortcuts modal visibility state
- **`shortcutsList`**: Derived list of all shortcuts from site config

### Components

- **`AppShortcutsModal.vue`**: Displays the shortcuts reference modal
- **`UKbd`**: Renders keyboard key indicators

### Layouts

Shortcuts are registered in layout files to ensure they're available across pages:

- **`layouts/default.vue`**: Full set of shortcuts for standard pages
- **`layouts/graph.vue`**: Subset of shortcuts for the graph view

::alert{type="info"}
Shortcuts are automatically disabled when focus is in an input field or textarea to prevent interference with typing.
::

## Accessibility

Keyboard shortcuts enhance accessibility by providing keyboard-only navigation. However, all features remain accessible via mouse/touch for users who don't use keyboard shortcuts.

The shortcuts modal (`?`) provides a discoverable reference for all available shortcuts, ensuring users can learn the keyboard interface at their own pace.
